<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××¨×›×– ×©×™×¨×•×ª ×‘×¨×¢"× - VAG Specialist</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#001e50">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;800&display=swap');
        body { font-family: 'Assistant', sans-serif; background: #f0f2f5; color: #1e293b; overflow-x: hidden; }
        .vag-gradient { background: linear-gradient(135deg, #001e50 0%, #004080 100%); }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .spec-card { border-right: 4px solid #3b82f6; transition: 0.3s; }
        .tip-box { background: linear-gradient(120deg, #fff9c4 0%, #fffde7 100%); border: 1px solid #fbc02d; }
        .sub-section { display: none; animation: fadeIn 0.4s ease-out; }
        .sub-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #sigPad { width: 100%; height: 200px; background: #fff; border: 2px dashed #cbd5e1; border-radius: 1rem; touch-action: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-10">

    <header class="vag-gradient pt-12 pb-24 px-6 text-white text-center rounded-b-[3rem] shadow-2xl relative">
        <h1 class="text-4xl font-black italic tracking-tighter mb-1">××¨×›×– ×©×™×¨×•×ª ×‘×¨×¢"×</h1>
        <p class="text-blue-200 text-sm font-bold uppercase tracking-widest">VAG Group Excellence</p>
        
        <div id="statusBadge" class="mt-4 inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-black glass text-blue-900">
            <span id="statusDot" class="w-2 h-2 rounded-full bg-green-500"></span>
            <span id="statusLabel">×˜×•×¢×Ÿ...</span>
        </div>
    </header>

    <main class="max-w-md mx-auto px-5 -mt-16 space-y-6">

        <div id="section-home" class="sub-section active space-y-6">
            <div class="grid grid-cols-2 gap-4">
                <a href="tel:086277195" class="glass p-5 rounded-3xl text-center shadow-lg active:scale-95 transition-transform">
                    <i class="fas fa-phone-alt text-2xl text-blue-700 mb-2"></i>
                    <span class="block text-sm font-black text-blue-900">×—×™×•×’ ××”×™×¨</span>
                </a>
                <a href="https://waze.com/ul?q=×¤× ×—×¡ ×”×—×•×¦×‘ 35 ×‘××¨ ×©×‘×¢" class="glass p-5 rounded-3xl text-center shadow-lg active:scale-95 transition-transform">
                    <i class="fas fa-location-arrow text-2xl text-blue-500 mb-2"></i>
                    <span class="block text-sm font-black text-blue-900">× ×™×•×•×˜ WAZE</span>
                </a>
            </div>

            <div class="tip-box p-5 rounded-3xl shadow-md flex gap-4 items-start">
                <div class="text-3xl">ğŸ’¡</div>
                <div>
                    <h4 class="font-black text-amber-900 text-sm italic">×”×˜×™×¤ ×”×™×•××™ ××”××•×¡×š:</h4>
                    <p id="dailyTip" class="text-amber-800 text-xs mt-1 leading-relaxed font-medium italic"></p>
                </div>
            </div>

            <section class="bg-white p-6 rounded-[2rem] shadow-sm">
                <h3 class="font-black text-blue-900 mb-4 border-b pb-2 italic">×”××•××—×™×•×ª ×©×œ× ×• (VAG)</h3>
                <div class="space-y-3">
                    <div class="spec-card p-3 bg-gray-50 rounded-xl">
                        <h4 class="font-bold text-sm text-slate-800"><i class="fas fa-cogs ml-2 text-blue-600"></i>×’×™×¨×™× ×•×ª×™×‘×•×ª ×”×™×œ×•×›×™×</h4>
                        <p class="text-[11px] text-slate-500 italic">××•××—×™× ×‘×©×™×¤×•×¥ DSG, ×”×—×œ×¤×ª ××¦××“×™× ×•×›×™×•×œ ××•×— ×’×™×¨.</p>
                    </div>
                    <div class="spec-card p-3 bg-gray-50 rounded-xl">
                        <h4 class="font-bold text-sm text-slate-800"><i class="fas fa-microchip ml-2 text-blue-600"></i>×“×™××’× ×•×¡×˜×™×§×” ×•×ª×•×›× ×”</h4>
                        <p class="text-[11px] text-slate-500 italic">××™×ª×•×¨ ×ª×§×œ×•×ª ××—×©×‘ ×‘×¨××ª ×™×¦×¨×Ÿ ×•×¤×ª×¨×•× ×•×ª ×—×©××œ ××•×¨×›×‘×™×.</p>
                    </div>
                </div>
            </section>

            <div class="space-y-4">
                <button onclick="showPage('login')" class="w-full bg-slate-900 text-white p-6 rounded-[2rem] flex items-center justify-between shadow-xl active:scale-95 transition-all">
                    <div class="flex items-center gap-4 text-right">
                        <i class="fas fa-key text-blue-400"></i>
                        <div><h3 class="font-black italic">×›× ×™×¡×” ×œ××©×ª××© ×§×™×™×</h3><p class="text-[10px] opacity-60">×”×™×¡×˜×•×¨×™×”, ×¡×˜×˜×•×¡ ×•××™×©×•×¨ ×”×¦×¢×•×ª ××—×™×¨</p></div>
                    </div>
                    <i class="fas fa-arrow-left"></i>
                </button>

                <button onclick="showPage('register')" class="w-full bg-white p-6 rounded-[2rem] flex items-center justify-between shadow-sm border border-blue-50 active:scale-95 transition-all">
                    <div class="flex items-center gap-4 text-right">
                        <i class="fas fa-user-plus text-blue-600"></i>
                        <div><h3 class="font-black italic">×¨×™×©×•× ×œ×§×•×— ×—×“×©</h3><p class="text-[10px] opacity-60">×¤×ª×™×—×ª ×›×¨×˜×™×¡ ×•×”×¦×˜×¨×¤×•×ª ×œ××¨×›×– ×”×©×™×¨×•×ª</p></div>
                    </div>
                    <i class="fas fa-plus text-blue-600"></i>
                </button>
            </div>
        </div>

        <div id="section-login" class="sub-section bg-white p-8 rounded-[2rem] shadow-xl">
            <h2 class="text-2xl font-black mb-6 italic text-center text-blue-900">×©×œ×•×, ×˜×•×‘ ×œ×¨××•×ª ××•×ª×š</h2>
            <div class="space-y-4">
                <input id="lPlate" type="text" placeholder="××¡×¤×¨ ×¨×›×‘" class="w-full p-4 bg-gray-50 border rounded-2xl text-center font-bold outline-none focus:border-blue-500">
                <input id="lID" type="number" placeholder="×ª×¢×•×“×ª ×–×”×•×ª" class="w-full p-4 bg-gray-50 border rounded-2xl text-center outline-none focus:border-blue-500">
                <button onclick="handleLogin()" class="w-full vag-gradient text-white p-5 rounded-2xl font-black shadow-lg">×”×ª×—×‘×¨ ×œ××–×•×¨ ×”××™×©×™</button>
                <button onclick="showPage('home')" class="w-full text-gray-400 text-sm font-bold">×—×–×•×¨ ×œ×“×£ ×”×‘×™×ª</button>
            </div>
        </div>

        <div id="section-register" class="sub-section bg-white p-8 rounded-[2rem] shadow-xl space-y-4">
            <h2 class="text-2xl font-black italic text-blue-900">×¤×ª×™×—×ª ×›×¨×˜×™×¡ ×œ×§×•×—</h2>
            <div class="grid grid-cols-2 gap-3">
                <input id="rFName" placeholder="×©× ×¤×¨×˜×™" class="p-3 bg-gray-50 border rounded-xl outline-none">
                <input id="rLName" placeholder="×©× ××©×¤×—×”" class="p-3 bg-gray-50 border rounded-xl outline-none">
            </div>
            <input id="rID" placeholder="×ª×¢×•×“×ª ×–×”×•×ª (×—×•×‘×”)" class="w-full p-3 bg-gray-50 border rounded-xl outline-none">
            <input id="rPhone" placeholder="×˜×œ×¤×•×Ÿ" class="w-full p-3 bg-gray-50 border rounded-xl outline-none">
            <input id="rPlate" placeholder="××¡×¤×¨ ×¨×›×‘" class="w-full p-3 bg-blue-50 border-blue-200 border rounded-xl font-bold outline-none">
            <input id="rModel" placeholder="×“×’× ×¨×›×‘ (××•×§×˜×‘×™×”, ×’×•×œ×£...)" class="w-full p-3 bg-gray-50 border rounded-xl outline-none">
            <input id="rKM" type="number" placeholder="×§×™×œ×•××˜×¨××–' × ×•×›×—×™" class="w-full p-3 bg-gray-50 border rounded-xl outline-none">
            <div>
                <label class="text-[10px] font-bold text-gray-400 mr-1">×ª××¨×™×š ×˜×¡×˜ ×©× ×ª×™:</label>
                <input id="rTest" type="date" class="w-full p-3 bg-gray-50 border rounded-xl outline-none text-sm">
            </div>
            <button onclick="handleRegister()" class="w-full bg-blue-600 text-white p-5 rounded-2xl font-black shadow-lg">×©×œ×— ×•×¤×ª×— ×›×¨×˜×™×¡</button>
            <button onclick="showPage('home')" class="w-full text-gray-400 text-xs">×‘×™×˜×•×œ</button>
        </div>

        <div id="section-dash" class="sub-section space-y-6">
            <div class="bg-white p-6 rounded-3xl shadow-sm border-r-8 border-blue-600 flex justify-between items-center">
                <div>
                    <h2 id="dashWelcome" class="text-2xl font-black"></h2>
                    <p id="dashCar" class="text-blue-600 font-bold text-sm"></p>
                </div>
                <button onclick="location.reload()" class="text-gray-300"><i class="fas fa-sign-out-alt"></i></button>
            </div>

            <div class="bg-white p-5 rounded-3xl shadow-sm text-center">
                <p class="text-xs text-gray-400 font-bold uppercase mb-1">×¡×˜×˜×•×¡ ×¨×›×‘ ×‘××•×¡×š:</p>
                <div id="dashStatus" class="text-xl font-black text-blue-900 italic">×¨×©×•× ×‘××¢×¨×›×ª</div>
            </div>

            <div id="quoteArea" class="hidden bg-amber-50 p-6 rounded-[2rem] border-2 border-amber-200 shadow-xl">
                <div class="text-center mb-4">
                    <h3 class="font-black text-amber-900 text-lg">××™×©×•×¨ ×”×¦×¢×ª ××—×™×¨</h3>
                    <p class="text-[10px] text-amber-700 font-bold">× × ×œ×¢×‘×•×¨ ×¢×œ ×”×¤×¨×˜×™× ×•×œ×—×ª×•× ×œ××˜×”</p>
                </div>
                <div class="bg-white rounded-2xl p-4 mb-4 shadow-inner">
                    <table class="w-full text-sm">
                        <tbody id="qItems"></tbody>
                        <tfoot class="border-t font-black">
                            <tr><td class="pt-3">×¡×”"×› ×›×•×œ×œ ××¢"×</td><td id="qTotal" class="pt-3 text-left"></td></tr>
                        </tfoot>
                    </table>
                </div>
                <canvas id="sigPad"></canvas>
                <button onclick="approveQuote()" class="w-full bg-green-600 text-white p-5 rounded-2xl font-black mt-4 shadow-lg shadow-green-100">××©×¨ ×•×—×ª×•× ×œ×‘×™×¦×•×¢ âœ…</button>
            </div>

            <div class="bg-white p-6 rounded-[2rem] shadow-sm">
                <h3 class="font-black mb-4 flex items-center gap-2 text-blue-900"><i class="fas fa-history"></i> ×”×™×¡×˜×•×¨×™×™×ª ×˜×™×¤×•×œ×™×</h3>
                <div id="historyList" class="space-y-3 text-sm text-gray-400 italic">
                    ××™×Ÿ ×¢×“×™×™×Ÿ ×˜×™×¤×•×œ×™× ×¨×©×•××™× ×‘×ª×™×§ ×–×”.
                </div>
            </div>
        </div>

        <section id="footerReviews" class="space-y-4">
            <h3 class="text-center text-[10px] font-black text-gray-400 uppercase tracking-tighter">×‘×™×§×•×¨×•×ª ×××•××ª×•×ª - ×’×•×’×œ</h3>
            <div class="flex overflow-x-auto gap-4 pb-4 no-scrollbar">
                <div class="min-w-[280px] bg-white p-5 rounded-3xl shadow-sm border border-gray-50">
                    <div class="flex text-amber-400 text-[10px] mb-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="text-xs italic mb-2">"×”××•×¡×š ×”×›×™ ××§×¦×•×¢×™ ×œ×¡×™××˜ ×‘×‘××¨ ×©×‘×¢. ×™× ×™×‘ ××•××—×” ×××™×ª×™."</p>
                    <span class="text-[10px] font-black text-blue-900">- ××‘×™×¨× ×’.</span>
                </div>
                <div class="min-w-[280px] bg-white p-5 rounded-3xl shadow-sm border border-gray-50">
                    <div class="flex text-amber-400 text-[10px] mb-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="text-xs italic mb-2">"×©×™×¨×•×ª ××“×™×‘ ×•×©×§×™×¤×•×ª ××œ××”. ×œ× ××—×œ×™×¤×™× ×—×œ×§×™× ×¡×ª×."</p>
                    <span class="text-[10px] font-black text-blue-900">- ×“×•×¨×•×Ÿ ×œ.</span>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- Firebase Initialize ---
        const firebaseConfig = {
            apiKey: "AIzaSyDD7YAdTePRWYjwBbmy3gLRYd_OLDwpTL8",
            authDomain: "baram-vag-45e12.firebaseapp.com",
            projectId: "baram-vag-45e12",
            storageBucket: "baram-vag-45e12.firebasestorage.app",
            messagingSenderId: "761383355945",
            appId: "1:761383355945:web:552554b5a6b9fe5e78be38"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let sigPad, currentPlate;

        // --- Pages Logic ---
        function showPage(pageId) {
            document.querySelectorAll('.sub-section').forEach(s => s.classList.remove('active'));
            document.getElementById('section-' + pageId).classList.add('active');
            window.scrollTo(0, 0);
            if(pageId === 'home') document.getElementById('footerReviews').classList.remove('hidden');
            else document.getElementById('footerReviews').classList.add('hidden');
        }

        // --- Live Status & Tips ---
        function updateStatus() {
            const now = new Date(); const day = now.getDay(); const hr = now.getHours(); const min = now.getMinutes();
            const time = hr * 60 + min;
            const label = document.getElementById('statusLabel'); const dot = document.getElementById('statusDot');
            
            if(day <= 4) { // Sun-Thu
                if(time >= 450 && time < 900) { label.innerText = "×¤×ª×•×— ×¢×›×©×™×•"; dot.className = "w-2 h-2 rounded-full bg-green-500"; }
                else if(time >= 900 && time < 930) { label.innerText = "×œ×§×¨××ª ×¡×’×™×¨×”"; dot.className = "w-2 h-2 rounded-full bg-amber-500"; }
                else { label.innerText = "×”××•×¡×š ×¡×’×•×¨"; dot.className = "w-2 h-2 rounded-full bg-red-500"; }
            } else { label.innerText = "×¡×’×•×¨ (×¡×•×¤\"×©)"; dot.className = "w-2 h-2 rounded-full bg-red-500"; }
        }
        
        const tips = [
            "×‘×“×•×§ ×©××Ÿ ×•××™× ×¤×¢× ×‘×©×‘×•×¢×™×™× ×›×“×™ ×œ×©××•×¨ ×¢×œ ×× ×•×¢ ×”-VAG ×©×œ×š.",
            "×‘×ª×™×‘×•×ª DSG ××•××œ×¥ ×œ×”×—×œ×™×£ ×©××Ÿ ×’×™×¨ ×›×œ 60 ××œ×£ ×§\"×.",
            "× ×•×¨×ª ×× ×•×¢ ×“×•×œ×§×ª? ××œ ×ª×—×›×”, ×—×™×‘×•×¨ ×œ××—×©×‘ ×™×× ×¢ × ×–×§ ××¦×˜×‘×¨.",
            "×œ×—×¥ ××•×•×™×¨ ×ª×§×™×Ÿ ×—×•×¡×š ×¢×“ 5% ××¦×¨×™×›×ª ×”×“×œ×§ ×©×œ×š.",
            "×¨×¢×©×™× ×‘×‘×œ×™××”? ×™×™×ª×›×Ÿ ×©×”×’×™×¢ ×”×–××Ÿ ×œ×”×—×œ×™×£ ×¨×¤×™×“×•×ª.",
            "×”××•×¡×š ×¡×’×•×¨ ×”×™×•×, × ×©××— ×œ×¨××•×ª×›× ×‘×™×•× ×¨××©×•×Ÿ!",
            "×× ×•×—×” ×œ×× ×•×¢! ×©×™×”×™×” ×¡×•×£ ×©×‘×•×¢ ×¨×’×•×¢."
        ];
        document.getElementById('dailyTip').innerText = tips[new Date().getDay()];
        updateStatus(); setInterval(updateStatus, 60000);

        // --- Auth & DB Functions ---
        async function handleRegister() {
            const plate = document.getElementById('rPlate').value.trim();
            const data = {
                fName: document.getElementById('rFName').value,
                lName: document.getElementById('rLName').value,
                id: document.getElementById('rID').value,
                phone: document.getElementById('rPhone').value,
                plate: plate,
                model: document.getElementById('rModel').value,
                km: document.getElementById('rKM').value,
                nextT: document.getElementById('rTest').value,
                status: "×¨×©×•× ×‘××¢×¨×›×ª",
                history: []
            };
            if(!plate || !data.id) return alert("× × ×œ××œ× ××¡×¤×¨ ×¨×›×‘ ×•×ª×¢×•×“×ª ×–×”×•×ª");
            await db.collection("customers").doc(plate).set(data);
            alert("× ×¨×©××ª ×‘×”×¦×œ×—×”! ×›×¢×ª × ×™×ª×Ÿ ×œ×”×ª×—×‘×¨.");
            showPage
