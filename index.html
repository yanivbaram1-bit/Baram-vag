<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>מרכז שירות ברע״מ | VAG Specialist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap');
        body { font-family: 'Assistant', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        
        /* Header מוגדל ובולט */
        .main-header {
            background: white; padding: 20px 15px; border-bottom: 2px solid #f1f5f9;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: center;
            position: sticky; top: 0; z-index: 100;
        }
        .brand-name { font-size: 26px; font-weight: 800; color: #1e3a8a; line-height: 1.1; margin-bottom: 6px; }
        .live-time-box { font-size: 14px; font-weight: 700; color: #2563eb; background: #eff6ff; display: inline-block; padding: 5px 15px; border-radius: 10px; margin-bottom: 10px; }
        .hours-badge { background: #1e293b; color: #f8fafc; font-size: 12px; font-weight: 600; padding: 8px 18px; border-radius: 25px; display: inline-flex; align-items: center; gap: 8px; }

        .hero-bg { background: linear-gradient(135deg, #0f172a 0%, #1e40af 100%); color: white; padding: 40px 20px 100px 20px; text-align: center; clip-path: ellipse(150% 100% at 50% 0%); position: relative; z-index: 1; }
        .services-container { position: relative; z-index: 10; margin-top: -60px; padding: 0 15px; }
        .service-card { background: white; border-radius: 20px; padding: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.06); border: 1px solid #f1f5f9; text-align: center; }
        
        .action-box { background: #ffffff; border-radius: 25px; padding: 18px; margin: 12px 0; box-shadow: 0 8px 25px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; width: 100%; text-align: right; transition: 0.2s; }
        .action-box:active { transform: scale(0.97); }

        .tip-box { background: linear-gradient(to left, #fffcf0, #fff); border-right: 4px solid #fbbf24; border-radius: 15px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.1); }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="brand-name">מרכז שירות ברע״מ</div>
        <div id="liveDateTime" class="live-time-box">טוען זמן...</div>
        <br>
        <div class="hours-badge">
            <i class="fas fa-clock text-blue-400"></i>
            <span>א׳-ה׳ 07:30 - 15:30 | ו׳-ש׳: סגור</span>
        </div>
    </header>

    <div id="homePage">
        <section class="hero-bg">
            <h2 class="text-2xl font-bold mb-2 uppercase tracking-tight">VAG Specialist</h2>
            <p class="text-blue-100 text-xs opacity-90 italic">מקצוענות ברמת יצרן Audi • VW • Skoda • Seat</p>
        </section>

        <div class="services-container">
            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="service-card"><i class="fas fa-laptop-code text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">דיאגנוסטיקה</h4></div>
                <div class="service-card"><i class="fas fa-oil-can text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">טיפול תקופתי</h4></div>
                <div class="service-card"><i class="fas fa-cogs text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">שיפוץ גירים</h4></div>
                <div class="service-card"><i class="fas fa-bolt text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">חשמל ומיזוג</h4></div>
                <div class="service-card"><i class="fas fa-truck-monster text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">מערכות 4x4</h4></div>
                <div class="service-card"><i class="fas fa-gas-pump text-blue-600 text-2xl mb-2 block"></i><h4 class="font-bold text-[11px]">מערכות אוריאה</h4></div>
            </div>

            <div class="tip-box flex items-start gap-3">
                <i class="fas fa-lightbulb text-yellow-500 text-lg mt-1"></i>
                <div>
                    <h5 class="font-bold text-xs text-yellow-700">טיפול מונע: טיפ יומי</h5>
                    <p id="dailyTipText" class="text-[11px] text-gray-600 mt-1 leading-snug">טוען טיפ...</p>
                </div>
            </div>

            <button onclick="showPage('crm')" class="action-box">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-900 text-xl shadow-inner"><i class="fas fa-user-check"></i></div>
                    <div><h3 class="font-bold text-gray-800 text-sm">כניסה לאזור אישי</h3><p class="text-[10px] text-gray-400">היסטוריית טיפולים וניהול תורים</p></div>
                </div>
            </button>

            <div class="action-box">
                <div class="flex items-center gap-4 mb-3">
                    <div class="w-12 h-12 bg-blue-900 rounded-2xl flex items-center justify-center text-white text-xl"><i class="fas fa-comment-dots"></i></div>
                    <h3 class="font-bold text-gray-800 text-sm">שאל את המומחה</h3>
                </div>
                <div class="relative">
                    <input type="text" id="expertInput" placeholder="מה הבעיה ברכב?" class="w-full p-3 bg-gray-50 border border-gray-100 rounded-xl text-xs outline-none">
                    <button onclick="askExpert()" class="absolute left-2 top-1.5 bg-blue-900 text-white w-8 h-8 rounded-lg flex items-center justify-center shadow-lg"><i class="fas fa-paper-plane text-xs"></i></button>
                </div>
                <p id="chatStatus" class="text-[10px] text-blue-600 mt-2 hidden"></p>
            </div>
        </div>

        <div class="px-4 mt-6 pb-10">
            <a href="https://wa.me/972505858750" class="w-full bg-green-500 text-white rounded-2xl p-4 flex items-center justify-center gap-3 shadow-xl font-bold">
                <i class="fab fa-whatsapp text-2xl"></i>
                סיוע מהיר/מיקום בוואטסאפ
            </a>
        </div>
    </div>

    <div id="crmPage" class="hidden p-8 pt-10 h-screen bg-white">
        <h3 class="text-3xl font-bold text-blue-900 mb-2">כניסת לקוחות</h3>
        <p class="text-sm text-gray-400 mb-8">הקש פרטים לסנכרון הרכב</p>
        <div class="space-y-4">
            <input type="text" id="custName" placeholder="שם מלא" class="w-full p-4 bg-gray-50 border rounded-2xl outline-none">
            <input type="tel" id="custPlate" placeholder="מספר רכב" class="w-full p-4 bg-gray-50 border rounded-2xl text-center font-bold tracking-widest">
            <button onclick="saveCustomer()" class="w-full bg-blue-900 text-white p-5 rounded-2xl font-bold text-lg shadow-xl">התחברות</button>
            <button onclick="showPage('home')" class="w-full text-gray-400 text-xs mt-6 text-center">חזרה</button>
        </div>
    </div>

    <script>
        // חיבור ה-Config ששלחת
        const firebaseConfig = {
            apiKey: "AIzaSyDD7YAdTePRWYjwBbmy3gLRYd_OLDwpTL8",
            authDomain: "baram-vag-45e12.firebaseapp.com",
            projectId: "baram-vag-45e12",
            storageBucket: "baram-vag-45e12.firebasestorage.app",
            messagingSenderId: "761383355945",
            appId: "1:761383355945:web:552554b5a6b9fe5e78be38",
            measurementId: "G-3WMX88H0NM"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', day: 'numeric', month: 'long', hour: '2-digit', minute: '2-digit' };
            document.getElementById('liveDateTime').innerText = now.toLocaleDateString('he-IL', options).replace(',', ' |');
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        const tips = [
            "החלפת שמן גיר DSG בכל 60,000 ק\"מ שומרת על אורך חיי הגיר.",
            "בקיץ הישראלי, בדקו נוזל קירור פעם בחודש (כשהמנוע קר בלבד!).",
            "נורת אוריאה דולקת? אל תמתינו, הרכב עלול להינעל ולא להניע.",
            "רעידות בבלימה מעידות לרוב על צלחות שחוקות. בטיחות לפני הכל!"
        ];
        document.getElementById('dailyTipText').innerText = tips[Math.floor(Math.random() * tips.length)];

        function showPage(p) {
            document.getElementById('homePage').classList.toggle('hidden', p !== 'home');
            document.getElementById('crmPage').classList.toggle('hidden', p !== 'crm');
            window.scrollTo(0,0);
        }

        function askExpert() {
            const input = document.getElementById('expertInput');
            const status = document.getElementById('chatStatus');
            if(!input.value) return;
            status.innerText = "שולח שאלה...";
            status.classList.remove('hidden');
            db.collection("expert_questions").add({
                question: input.value,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                status.innerText = "נשלח בהצלחה! המומחה יחזור אליך.";
                input.value = "";
            });
        }

        function saveCustomer() {
            const name = document.getElementById('custName').value;
            const plate = document.getElementById('custPlate').value;
            if(!name || !plate) return alert("מלא פרטים");
            db.collection("customers").add({
                name: name,
                plate: plate,
                time: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("פרטיך נקלטו במערכת!");
                showPage('home');
            });
        }
    </script>
</body>
</html>
